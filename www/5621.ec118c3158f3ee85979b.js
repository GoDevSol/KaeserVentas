(self.webpackChunkKaeser_Ventas=self.webpackChunkKaeser_Ventas||[]).push([[5621],{5621:(o,t,i)=>{"use strict";i.r(t),i.d(t,{postVentaViewModule:()=>Z});var e=i(6274),n=i(4988),r=i(4683),d=i(4337),a=i(1855),s=i(7272),c=i(7242);let g=(()=>{class o{constructor(o,t){this.modalCtrl=o,this.api=t,this.tipoEquipo={tipo:""},this.fileName="",this.modelo=[]}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){this.modelo=yield this.api.getDBItem("postVenta"),this.fileName=this.modelo.direccionArchivo.split("\\")[2]})}dismissModal(){return(0,a.mG)(this,void 0,void 0,function*(){yield this.modalCtrl.dismiss()})}loadData(){return(0,a.mG)(this,void 0,void 0,function*(){var o=new FormData;o.append("file",this.file),o.append("id",this.modelo.id);var t=yield this.api.loadFile(o);this.modelo.direccionArchivo=t,yield this.api.setDBItem("postVenta",this.modelo),yield this.modalCtrl.dismiss()})}openDialog(){document.getElementById("fileid").click()}loadFile(o){this.file=o.target.files[0],this.fileName=this.file.name}}return o.\u0275fac=function(t){return new(t||o)(s.Y36(r.IN),s.Y36(c.r))},o.\u0275cmp=s.Xpm({type:o,selectors:[["ng-component"]],decls:21,vars:3,consts:[[3,"translucent"],[2,"--background","none","border-bottom","#4C7176 solid","border-width","3px","border-top","solid 5px #4C7176"],["slot","end"],[3,"click"],["fullscreen",""],[2,"--background","#E6E7E7"],[2,"text-align","justify","line-height","1","font-size","14px"],[2,"margin-top","20px","--background","#E6E7E7","color","#59595C"],["id","fileid","type","file","hidden","",3,"change"],[2,"text-align","-webkit-center"],["name","document-outline"],[1,"roundedInput"],["clearInput","true","type","text","disabled","","placeholder","Ningun archivo cargado",2,"margin","-0px","--placeholder-font-weight","5px","height","10px",3,"value"],[2,"--border-radius","25px","--padding","0 25px","--background","#4C7176",3,"click"]],template:function(o,t){1&o&&(s.TgZ(0,"ion-header",0),s.TgZ(1,"ion-toolbar",1),s.TgZ(2,"ion-title"),s._uU(3),s.qZA(),s.TgZ(4,"ion-buttons",2),s.TgZ(5,"ion-button",3),s.NdJ("click",function(){return t.dismissModal()}),s._uU(6,"X"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"ion-content",4),s.TgZ(8,"ion-card",5),s.TgZ(9,"ion-card-content",6),s.TgZ(10,"div",7),s.TgZ(11,"input",8),s.NdJ("change",function(o){return t.loadFile(o)}),s.qZA(),s.TgZ(12,"div",9),s._UZ(13,"ion-icon",10),s.qZA(),s.TgZ(14,"ion-item",11),s._UZ(15,"ion-input",12),s.qZA(),s.TgZ(16,"div",9),s.TgZ(17,"ion-button",13),s.NdJ("click",function(){return t.openDialog()}),s._uU(18," Cargar Archivo"),s.qZA(),s.TgZ(19,"ion-button",13),s.NdJ("click",function(){return t.loadData()}),s._uU(20," Guargar"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&o&&(s.Q6J("translucent",!0),s.xp6(3),s.Oqu(t.tipoEquipo.tipo.toUpperCase()),s.xp6(12),s.Q6J("value",t.fileName))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.W2,r.PM,r.FN,r.gu,r.Ie,r.pK,r.j9],styles:["ion-content[_ngcontent-%COMP%]{--background:url(/assets/img/login/background.png) no-repeat center center/cover}h1[_ngcontent-%COMP%]{font-size:larger}.roundedInput[_ngcontent-%COMP%]{--border-color:var(--ion-color-medium-shade);margin-top:5px;--border-radius:25px;--border-width:2px;--box-shadow:0px gray;--color:#000;--highlight-height:0;--background:#0000}.file-input[_ngcontent-%COMP%]{display:none}ion-icon[_ngcontent-%COMP%]{font-size:75px}"]}),o})();function l(o,t){if(1&o&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.TgZ(9,"td"),s._uU(10),s.qZA(),s.qZA()),2&o){const o=t.$implicit,i=t.index;s.xp6(2),s.Oqu(i+1),s.xp6(2),s.Oqu(o.cantidad),s.xp6(2),s.Oqu(o.modelo),s.xp6(2),s.Oqu(o.PSI),s.xp6(2),s.Oqu(o.VOLTAJE)}}function u(o,t){if(1&o&&(s.TgZ(0,"div",21),s.TgZ(1,"h2"),s._uU(2," ORDEN DE COMPRA:"),s.qZA(),s.TgZ(3,"table"),s.TgZ(4,"tr"),s.TgZ(5,"th"),s._UZ(6,"ion-icon",22),s.qZA(),s.TgZ(7,"th"),s.TgZ(8,"strong"),s._uU(9),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&o){const o=s.oxw();s.xp6(9),s.hij(" ",o.direccionArchivo," ")}}const p=[{path:"",component:(()=>{class o{constructor(o,t,i,e){this.navCtrl=o,this.api=t,this.modalCtrl=i,this.toastController=e,this.modelosStorage=[],this.datosForm=[],this.direccionArchivo="",this.ejecutar=0}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){})}goTo(o){return(0,a.mG)(this,void 0,void 0,function*(){var t=yield this.api.getDBItem("return");console.log(t),this.navCtrl.navigateBack(t?"menu/cotizacionesAll":"menu/"+o)})}goForward(o){return(0,a.mG)(this,void 0,void 0,function*(){this.navCtrl.navigateForward("menu/"+o)})}showModal(){return(0,a.mG)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:g,componentProps:{id:""},backdropDismiss:!1});yield o.present(),yield o.onDidDismiss(),this.getData()})}getData(){return(0,a.mG)(this,void 0,void 0,function*(){this.ejecutar=yield this.api.getDBItem("ejecutar");var o=yield this.api.getDBItem("postVenta");this.modelosStorage=o.datosModelos,this.datosForm=o.datosForm,this.direccionArchivo=o.direccionArchivo,""!=this.direccionArchivo&&(this.direccionArchivo=this.direccionArchivo.split("\\")[2])})}Process(){return(0,a.mG)(this,void 0,void 0,function*(){const o=yield this.api.getDBItem("User");var t=yield this.api.getDBItem("postVenta"),i={id:t.id,datosForm:JSON.stringify(t.datosForm),datosModelos:JSON.stringify(t.datosModelos),estado:2};yield this.api.modificarCotizacion(i),this.api.showToast("Post Venta procesada exitosamente","Post Venta");var e={url:"cotizacion.php",datosForm:this.datosForm,modelos:this.modelosStorage,user:o,titulo:"POSTVENTA"};yield this.api.sendMail(e),this.navCtrl.navigateBack("menu/register")})}ProcessEjecutar(){return(0,a.mG)(this,void 0,void 0,function*(){var o=yield this.api.getDBItem("postVenta"),t={id:o.id,datosForm:JSON.stringify(o.datosForm),datosModelos:JSON.stringify(o.datosModelos),direccionArchivo:o.direccionArchivo,estadoC4C:1,estado:o.estado};yield this.api.modificarCotizacion(t),this.api.showToast("Post Venta procesada en C4C exitosamente","C4C Checklist"),this.navCtrl.navigateBack("menu/register")})}ionViewWillEnter(){this.getData()}}return o.\u0275fac=function(t){return new(t||o)(s.Y36(r.SH),s.Y36(c.r),s.Y36(r.IN),s.Y36(r.yF))},o.\u0275cmp=s.Xpm({type:o,selectors:[["app-enviar"]],decls:88,vars:17,consts:[[3,"translucent"],[2,"--background","none","border-bottom","#4C7176 solid","border-width","3px","border-top","solid 5px #4C7176"],["slot","start","src","assets/img/principal/logo.png",2,"height","50px","margin","5px"],["slot","end"],[2,"color","#4C7176"],[3,"fullscreen"],[2,"--background","none","border","none"],["src","assets/img/back.png",2,"height","25px","display","inline","width","20px","vertical-align","super",3,"click"],[2,"--border-radius","25px","--padding","0 25px","--background","#4C7176","height","25px","vertical-align","super",3,"click"],[2,"--background","#E6E7E7"],[2,"text-align","justify","line-height","1","font-size","14px"],[2,"margin-top","20px","border-top","2px solid #4C7176","padding-top","10px"],[2,"border-top","2px solid #4C7176","padding-top","10px"],[4,"ngFor","ngForOf"],["style","text-align: -webkit-left; margin-top: 15px;",4,"ngIf"],[2,"text-align","-webkit-center","margin-top","20px"],["type","submit",2,"--border-radius","25px","--padding","0 25px","--background","#4C7176",3,"click"],["type","submit",2,"--border-radius","25px","--padding","0 25px","--background","#4C7176",3,"hidden","click"],["text-center","","no-border","","transparent","",2,"background","white"],[2,"text-align","-webkit-center","border-top","2px solid #4C7176"],["src","assets/img/footer/footer.png",2,"width","225px"],[2,"text-align","-webkit-left","margin-top","15px"],["name","document-outline"]],template:function(o,t){1&o&&(s.TgZ(0,"ion-header",0),s.TgZ(1,"ion-toolbar",1),s._UZ(2,"ion-img",2),s.TgZ(3,"ion-buttons",3),s._UZ(4,"ion-menu-button",4),s.qZA(),s.qZA(),s.qZA(),s.TgZ(5,"ion-content",5),s.TgZ(6,"ion-toolbar",6),s.TgZ(7,"div"),s.TgZ(8,"img",7),s.NdJ("click",function(){return t.goTo("postVenta")}),s.qZA(),s.TgZ(9,"ion-button",8),s.NdJ("click",function(){return t.goTo("postVenta")}),s._uU(10," Vista Previa"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"ion-card",9),s.TgZ(12,"ion-card-content",10),s._uU(13," Agregue una vista previa para poder procesar la cotizacion o editela. "),s.TgZ(14,"div",11),s.TgZ(15,"h1"),s._uU(16," Datos:"),s.qZA(),s.TgZ(17,"h2"),s.TgZ(18,"strong"),s._uU(19," No. de oportunidad: "),s.qZA(),s._uU(20),s.qZA(),s.TgZ(21,"h2"),s.TgZ(22,"strong"),s._uU(23,"No. de oferta:"),s.qZA(),s._uU(24),s.qZA(),s.TgZ(25,"h2"),s.TgZ(26,"strong"),s._uU(27,"Id Cliente:"),s.qZA(),s._uU(28),s.qZA(),s.TgZ(29,"h2"),s.TgZ(30,"strong"),s._uU(31,"Nombre del cliente:"),s.qZA(),s._uU(32),s.qZA(),s.TgZ(33,"h2"),s.TgZ(34,"strong"),s._uU(35,"Direcci\xf3n de entrega:"),s.qZA(),s._uU(36),s.qZA(),s.TgZ(37,"h2"),s.TgZ(38,"strong"),s._uU(39,"Contacto:"),s.qZA(),s._uU(40),s.qZA(),s.TgZ(41,"h2"),s.TgZ(42,"strong"),s._uU(43,"Condiciones de pago:"),s.qZA(),s._uU(44),s.qZA(),s.TgZ(45,"h2"),s.TgZ(46,"strong"),s._uU(47,"Moneda:"),s.qZA(),s._uU(48),s.qZA(),s.TgZ(49,"h2"),s.TgZ(50,"strong"),s._uU(51,"Porcentaje de descuento:"),s.qZA(),s._uU(52),s.qZA(),s.TgZ(53,"h2"),s.TgZ(54,"strong"),s._uU(55,"Correo electr\xf3nico del cliente:"),s.qZA(),s._uU(56),s.qZA(),s.TgZ(57,"h2"),s.TgZ(58,"strong"),s._uU(59,"Observacion:"),s.qZA(),s._uU(60),s.qZA(),s.qZA(),s._UZ(61,"hr"),s.TgZ(62,"div",12),s.TgZ(63,"table"),s.TgZ(64,"tr"),s.TgZ(65,"th"),s._uU(66,"#"),s.qZA(),s.TgZ(67,"th"),s._uU(68,"Unidades"),s.qZA(),s.TgZ(69,"th"),s._uU(70,"Descripcion"),s.qZA(),s.TgZ(71,"th"),s._uU(72,"PSI"),s.qZA(),s.TgZ(73,"th"),s._uU(74,"Voltaje"),s.qZA(),s.qZA(),s.YNc(75,l,11,5,"tr",13),s.qZA(),s.qZA(),s.YNc(76,u,10,1,"div",14),s.TgZ(77,"div",15),s.TgZ(78,"ion-button",16),s.NdJ("click",function(){return t.goForward("postVentaEdit")}),s._uU(79,"EDITAR"),s.qZA(),s.qZA(),s.TgZ(80,"div",15),s.TgZ(81,"ion-button",17),s.NdJ("click",function(){return t.Process()}),s._uU(82,"PROCESAR"),s.qZA(),s.TgZ(83,"ion-button",17),s.NdJ("click",function(){return t.ProcessEjecutar()}),s._uU(84," EJECUTAR C4C"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(85,"ion-footer",18),s.TgZ(86,"div",19),s._UZ(87,"ion-img",20),s.qZA(),s.qZA()),2&o&&(s.Q6J("translucent",!0),s.xp6(5),s.Q6J("fullscreen",!0),s.xp6(15),s.hij(" ",t.datosForm.oportunidad,""),s.xp6(4),s.hij(" ",t.datosForm.oferta,""),s.xp6(4),s.hij(" ",t.datosForm.idCliente,""),s.xp6(4),s.hij(" ",t.datosForm.nombreCliente,""),s.xp6(4),s.hij(" ",t.datosForm.direccion,""),s.xp6(4),s.hij(" ",t.datosForm.contacto," "),s.xp6(4),s.hij(" ",t.datosForm.condicionPago,""),s.xp6(4),s.hij(" ",t.datosForm.moneda,""),s.xp6(4),s.hij(" ",t.datosForm.porcentajeDescuento,"%"),s.xp6(4),s.hij(" ",t.datosForm.correoCliente,""),s.xp6(4),s.hij(" ",t.datosForm.observacion,""),s.xp6(15),s.Q6J("ngForOf",t.modelosStorage),s.xp6(1),s.Q6J("ngIf",t.direccionArchivo.length>0),s.xp6(5),s.Q6J("hidden",0!=t.ejecutar),s.xp6(2),s.Q6J("hidden",0==t.ejecutar))},directives:[r.Gu,r.sr,r.Xz,r.Sm,r.fG,r.W2,r.YG,r.PM,r.FN,e.sg,e.O5,r.fr,r.gu],styles:["ion-content[_ngcontent-%COMP%]{--background:url(/assets/img/login/background.png) no-repeat center center/cover}.roundedInput[_ngcontent-%COMP%]{--border-color:var(--ion-color-medium-shade);--background:#e6e7e7;margin-top:5px;padding:0 15px;font-size:14px;--border-radius:15px;--border-width:1px;--box-shadow:5px #fff;--color:#000;--highlight-height:0}.roundedInput.ion-invalid.item-has-focus[_ngcontent-%COMP%]{--border-color:var(--ion-color-danger-shade)}.roundedInput.ion-valid.item-has-focus[_ngcontent-%COMP%]{--border-color:var(--ion-color-success-shade)}.roundedInput.ion-invalid.ion-dirty[_ngcontent-%COMP%]{--border-color:var(--ion-color-danger-shade)}.roundedInput.ion-valid.ion-dirty[_ngcontent-%COMP%]{--border-color:var(--ion-color-success-shade)}table[_ngcontent-%COMP%]{font-family:arial,sans-serif;border:1px solid #4c7176;border-collapse:collapse;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left;padding:8px}th[_ngcontent-%COMP%]{border:1px solid #4c7176;color:#4c7176;background-color:#ddd}td[_ngcontent-%COMP%]{border-left:1px solid #4c7176;border-bottom:1px dashed #4c7176}ion-icon[_ngcontent-%COMP%]{font-size:45px}"]}),o})()}];let h=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[[d.Bz.forChild(p)],d.Bz]}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[[e.ez,n.u5,n.UX,r.Pc,h]]}),o})()}}]);