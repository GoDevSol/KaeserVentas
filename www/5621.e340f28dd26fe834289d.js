(self.webpackChunkKaeser_Ventas=self.webpackChunkKaeser_Ventas||[]).push([[5621],{1855:(t,i,o)=>{"use strict";function e(t,i,o,e){return new(o||(o=Promise))(function(n,r){function d(t){try{a(e.next(t))}catch(i){r(i)}}function s(t){try{a(e.throw(t))}catch(i){r(i)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof o?i:new o(function(t){t(i)})).then(d,s)}a((e=e.apply(t,i||[])).next())})}o.d(i,{mG:()=>e})},7242:(t,i,o)=>{"use strict";o.d(i,{r:()=>s});var e=o(1855),n=o(7272),r=o(2604),d=o(4683);let s=(()=>{class t{constructor(t,i){this.storage=t,this.toastController=i,this.URL="https://localhost/kaeserVentas/api/req/"}getDBItem(t){return(0,e.mG)(this,void 0,void 0,function*(){this.storage.create();var i=yield this.storage.get(t);return null==i?[]:i})}setDBItem(t,i){return(0,e.mG)(this,void 0,void 0,function*(){yield this.storage.create(),yield this.storage.set(t,i)})}cleanDBItem(t){return(0,e.mG)(this,void 0,void 0,function*(){yield this.storage.create(),yield this.storage.remove(t)})}showToast(t,i){return(0,e.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({color:"dark",message:t,header:i,position:"top",duration:1500})).present()})}login(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParamsWithOutAData(this.URL+"login/login.php",t)})}getInfoUser(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParams(this.URL+"login/validate_token.php",t)})}getTiposEquipo(){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitud(this.URL+"TiposEquipo/read.php")})}getTipoEquipoById(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParamsReturnOne(this.URL+"TiposEquipo/readById.php",t)})}getModelosByTipoEquipo(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParams(this.URL+"Modelo/readByIdTipoEquipo.php",t)})}readCotizacionAll(){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitud(this.URL+"Cotizaciones/read.php")})}readCotizacion(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParams(this.URL+"Cotizaciones/readByEstado.php",t)})}saveCotizacion(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParamsWithOutAData(this.URL+"Cotizaciones/create.php",t)})}modificarCotizacion(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParams(this.URL+"Cotizaciones/updateById.php",t)})}modificarUsuario(t){return(0,e.mG)(this,void 0,void 0,function*(){var i=yield this.getDBItem("JWT"),o=Object.assign(Object.assign({},t),{jwt:i});return yield this.resolverSolicitudParams(this.URL+"user/updateUser.php",o)})}updatePassword(t){return(0,e.mG)(this,void 0,void 0,function*(){var i=yield this.getDBItem("JWT"),o=Object.assign(Object.assign({},t),{jwt:i});return yield this.resolverSolicitudParamsWithOutAData(this.URL+"user/updateUserPassword.php",o)})}loadFile(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudSinJSON(this.URL+"upload.php",t)})}getFile(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParams(this.URL+"verificar.php",t)})}createPDF(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParamsWithOutParse(this.URL+"pdf/pdfCreation.php",t)})}sendMail(t){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.resolverSolicitudParams(this.URL+"email/"+t.url,t)})}resolverSolicitud(t){return(0,e.mG)(this,void 0,void 0,function*(){var i=yield fetch(t),o=yield i.json();return 1==o.status?o.data:[]})}resolverSolicitudParams(t,i){return(0,e.mG)(this,void 0,void 0,function*(){var o=yield fetch(t,{method:"POST",body:JSON.stringify(i)});return(yield o.json()).data})}resolverSolicitudParamsReturnOne(t,i){return(0,e.mG)(this,void 0,void 0,function*(){var o=yield fetch(t,{method:"POST",body:JSON.stringify(i)});return(yield o.json()).data[0]})}resolverSolicitudParamsWithOutAData(t,i){return(0,e.mG)(this,void 0,void 0,function*(){var o=yield fetch(t,{method:"POST",body:JSON.stringify(i)});return yield o.json()})}resolverSolicitudSinJSON(t,i){return(0,e.mG)(this,void 0,void 0,function*(){var o=yield fetch(t,{method:"POST",body:i});return(yield o.json()).data})}resolverSolicitudParamsWithOutParse(t,i){return(0,e.mG)(this,void 0,void 0,function*(){var o=yield fetch(t,{method:"POST",body:JSON.stringify(i)}),e=yield o.text();window.open("").document.write("<iframe width='100%' height='100%' src='"+e+"'></iframe>")})}}return t.\u0275fac=function(i){return new(i||t)(n.LFG(r.K),n.LFG(d.yF))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},5621:(t,i,o)=>{"use strict";o.r(i),o.d(i,{postVentaViewModule:()=>Z});var e=o(6274),n=o(4988),r=o(4683),d=o(4337),s=o(1855),a=o(7272),c=o(7242);let u=(()=>{class t{constructor(t,i){this.modalCtrl=t,this.api=i,this.tipoEquipo={tipo:""},this.fileName="",this.modelo=[]}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.modelo=yield this.api.getDBItem("postVenta"),this.fileName=this.modelo.direccionArchivo.split("\\")[2]})}dismissModal(){return(0,s.mG)(this,void 0,void 0,function*(){yield this.modalCtrl.dismiss()})}loadData(){return(0,s.mG)(this,void 0,void 0,function*(){var t=new FormData;t.append("file",this.file),t.append("id",this.modelo.id);var i=yield this.api.loadFile(t);this.modelo.direccionArchivo=i,yield this.api.setDBItem("postVenta",this.modelo),yield this.modalCtrl.dismiss()})}openDialog(){document.getElementById("fileid").click()}loadFile(t){this.file=t.target.files[0],this.fileName=this.file.name}}return t.\u0275fac=function(i){return new(i||t)(a.Y36(r.IN),a.Y36(c.r))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],decls:21,vars:3,consts:[[3,"translucent"],[2,"--background","none","border-bottom","#4C7176 solid","border-width","3px","border-top","solid 5px #4C7176"],["slot","end"],[3,"click"],["fullscreen",""],[2,"--background","#E6E7E7"],[2,"text-align","justify","line-height","1","font-size","14px"],[2,"margin-top","20px","--background","#E6E7E7","color","#59595C"],["id","fileid","type","file","hidden","",3,"change"],[2,"text-align","-webkit-center"],["name","document-outline"],[1,"roundedInput"],["clearInput","true","type","text","disabled","","placeholder","Ningun archivo cargado",2,"margin","-0px","--placeholder-font-weight","5px","height","10px",3,"value"],[2,"--border-radius","25px","--padding","0 25px","--background","#4C7176",3,"click"]],template:function(t,i){1&t&&(a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar",1),a.TgZ(2,"ion-title"),a._uU(3),a.qZA(),a.TgZ(4,"ion-buttons",2),a.TgZ(5,"ion-button",3),a.NdJ("click",function(){return i.dismissModal()}),a._uU(6,"X"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"ion-content",4),a.TgZ(8,"ion-card",5),a.TgZ(9,"ion-card-content",6),a.TgZ(10,"div",7),a.TgZ(11,"input",8),a.NdJ("change",function(t){return i.loadFile(t)}),a.qZA(),a.TgZ(12,"div",9),a._UZ(13,"ion-icon",10),a.qZA(),a.TgZ(14,"ion-item",11),a._UZ(15,"ion-input",12),a.qZA(),a.TgZ(16,"div",9),a.TgZ(17,"ion-button",13),a.NdJ("click",function(){return i.openDialog()}),a._uU(18," Cargar Archivo"),a.qZA(),a.TgZ(19,"ion-button",13),a.NdJ("click",function(){return i.loadData()}),a._uU(20," Guargar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.Q6J("translucent",!0),a.xp6(3),a.Oqu(i.tipoEquipo.tipo.toUpperCase()),a.xp6(12),a.Q6J("value",i.fileName))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.W2,r.PM,r.FN,r.gu,r.Ie,r.pK,r.j9],styles:["ion-content[_ngcontent-%COMP%]{--background:url(/assets/img/login/background.png) no-repeat center center/cover}h1[_ngcontent-%COMP%]{font-size:larger}.roundedInput[_ngcontent-%COMP%]{--border-color:var(--ion-color-medium-shade);margin-top:5px;--border-radius:25px;--border-width:2px;--box-shadow:0px gray;--color:#000;--highlight-height:0;--background:#0000}.file-input[_ngcontent-%COMP%]{display:none}ion-icon[_ngcontent-%COMP%]{font-size:75px}"]}),t})();function l(t,i){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.qZA()),2&t){const t=i.$implicit,o=i.index;a.xp6(2),a.Oqu(o+1),a.xp6(2),a.Oqu(t.cantidad),a.xp6(2),a.Oqu(t.modelo)}}function h(t,i){if(1&t&&(a.TgZ(0,"div",21),a.TgZ(1,"h2"),a._uU(2," ORDEN DE COMPRA:"),a.qZA(),a.TgZ(3,"table"),a.TgZ(4,"tr"),a.TgZ(5,"th"),a._UZ(6,"ion-icon",22),a.qZA(),a.TgZ(7,"th"),a.TgZ(8,"strong"),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(9),a.hij(" ",t.direccionArchivo," ")}}function g(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"ion-button",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().showModal()}),a._uU(1," MODIFICAR ORDEN DE COMPRA"),a.qZA()}}function p(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"ion-button",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().showModal()}),a._uU(1," AGREGAR ORDEN DE COMPRA"),a.qZA()}}const m=[{path:"",component:(()=>{class t{constructor(t,i,o,e){this.navCtrl=t,this.api=i,this.modalCtrl=o,this.toastController=e,this.modelosStorage=[],this.datosForm=[],this.direccionArchivo=""}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.getData()})}goTo(t){return(0,s.mG)(this,void 0,void 0,function*(){this.navCtrl.navigateBack("menu/"+t)})}goForward(t){return(0,s.mG)(this,void 0,void 0,function*(){this.navCtrl.navigateForward("menu/"+t)})}showModal(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:u,componentProps:{id:""},backdropDismiss:!1});yield t.present(),yield t.onDidDismiss(),this.getData()})}getData(){return(0,s.mG)(this,void 0,void 0,function*(){var t=yield this.api.getDBItem("postVenta");this.modelosStorage=t.datosModelos,this.datosForm=t.datosForm,this.direccionArchivo=t.direccionArchivo,""!=this.direccionArchivo&&(this.direccionArchivo=this.direccionArchivo.split("\\")[2])})}Process(){return(0,s.mG)(this,void 0,void 0,function*(){var t=yield this.api.getDBItem("postVenta");if(""!=t.direccionArchivo){var i={id:t.id,datosForm:JSON.stringify(t.datosForm),datosModelos:JSON.stringify(t.datosModelos),direccionArchivo:t.direccionArchivo,estado:2};yield this.api.modificarCotizacion(i),this.api.showToast("Post Venta procesada exitosamente","Post Venta"),this.navCtrl.navigateBack("menu/register")}else this.api.showToast("Por favor ingrese una orden de compra para poder procesar la cotizacion.","Post Venta")})}}return t.\u0275fac=function(i){return new(i||t)(a.Y36(r.SH),a.Y36(c.r),a.Y36(r.IN),a.Y36(r.yF))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-enviar"]],decls:84,vars:17,consts:[[3,"translucent"],[2,"--background","none","border-bottom","#4C7176 solid","border-width","3px","border-top","solid 5px #4C7176"],["slot","start","src","assets/img/principal/logo.png",2,"height","50px","margin","5px"],["slot","end"],[2,"color","#4C7176"],[3,"fullscreen"],[2,"--background","none","border","none"],["src","assets/img/back.png",2,"height","25px","display","inline","width","20px","vertical-align","super",3,"click"],[2,"--border-radius","25px","--padding","0 25px","--background","#4C7176","height","25px","vertical-align","super",3,"click"],[2,"--background","#E6E7E7"],[2,"text-align","justify","line-height","1","font-size","14px"],[2,"margin-top","20px","border-top","2px solid #4C7176","padding-top","10px"],[2,"border-top","2px solid #4C7176","padding-top","10px"],[4,"ngFor","ngForOf"],["style","text-align: -webkit-left; margin-top: 15px;",4,"ngIf"],[2,"text-align","-webkit-center","margin-top","20px"],["type","submit",2,"--border-radius","25px","--padding","0 25px","--background","#4C7176",3,"click"],["type","submit","style","--border-radius: 25px;--padding: 0 25px; --background: #4C7176",3,"click",4,"ngIf"],["text-center","","no-border","","transparent","",2,"background","white"],[2,"text-align","-webkit-center","border-top","2px solid #4C7176"],["src","assets/img/footer/footer.png",2,"width","225px"],[2,"text-align","-webkit-left","margin-top","15px"],["name","document-outline"]],template:function(t,i){1&t&&(a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar",1),a._UZ(2,"ion-img",2),a.TgZ(3,"ion-buttons",3),a._UZ(4,"ion-menu-button",4),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"ion-content",5),a.TgZ(6,"ion-toolbar",6),a.TgZ(7,"div"),a.TgZ(8,"img",7),a.NdJ("click",function(){return i.goTo("postVenta")}),a.qZA(),a.TgZ(9,"ion-button",8),a.NdJ("click",function(){return i.goTo("postVenta")}),a._uU(10," Vista Previa"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-card",9),a.TgZ(12,"ion-card-content",10),a._uU(13," Agregue una vista previa para poder procesar la cotizacion o editela. "),a.TgZ(14,"div",11),a.TgZ(15,"h1"),a._uU(16," Datos:"),a.qZA(),a.TgZ(17,"h2"),a.TgZ(18,"strong"),a._uU(19," No. de oportunidad: "),a.qZA(),a._uU(20),a.qZA(),a.TgZ(21,"h2"),a.TgZ(22,"strong"),a._uU(23,"No. de oferta:"),a.qZA(),a._uU(24),a.qZA(),a.TgZ(25,"h2"),a.TgZ(26,"strong"),a._uU(27,"Id Cliente:"),a.qZA(),a._uU(28),a.qZA(),a.TgZ(29,"h2"),a.TgZ(30,"strong"),a._uU(31,"Nombre del cliente:"),a.qZA(),a._uU(32),a.qZA(),a.TgZ(33,"h2"),a.TgZ(34,"strong"),a._uU(35,"Direcci\xf3n de entrega:"),a.qZA(),a._uU(36),a.qZA(),a.TgZ(37,"h2"),a.TgZ(38,"strong"),a._uU(39,"Contacto:"),a.qZA(),a._uU(40),a.qZA(),a.TgZ(41,"h2"),a.TgZ(42,"strong"),a._uU(43,"Condiciones de pago:"),a.qZA(),a._uU(44),a.qZA(),a.TgZ(45,"h2"),a.TgZ(46,"strong"),a._uU(47,"Moneda:"),a.qZA(),a._uU(48),a.qZA(),a.TgZ(49,"h2"),a.TgZ(50,"strong"),a._uU(51,"Porcentaje de descuento:"),a.qZA(),a._uU(52),a.qZA(),a.TgZ(53,"h2"),a.TgZ(54,"strong"),a._uU(55,"Correo electr\xf3nico del cliente:"),a.qZA(),a._uU(56),a.qZA(),a.TgZ(57,"h2"),a.TgZ(58,"strong"),a._uU(59,"Observacion:"),a.qZA(),a._uU(60),a.qZA(),a.qZA(),a._UZ(61,"hr"),a.TgZ(62,"div",12),a.TgZ(63,"table"),a.TgZ(64,"tr"),a.TgZ(65,"th"),a._uU(66,"#"),a.qZA(),a.TgZ(67,"th"),a._uU(68,"Unidades"),a.qZA(),a.TgZ(69,"th"),a._uU(70,"Descripcion"),a.qZA(),a.qZA(),a.YNc(71,l,7,3,"tr",13),a.qZA(),a.qZA(),a.YNc(72,h,10,1,"div",14),a.TgZ(73,"div",15),a.TgZ(74,"ion-button",16),a.NdJ("click",function(){return i.goTo("postVentaEdit")}),a._uU(75,"EDITAR"),a.qZA(),a.qZA(),a.TgZ(76,"div",15),a.YNc(77,g,2,0,"ion-button",17),a.YNc(78,p,2,0,"ion-button",17),a.TgZ(79,"ion-button",16),a.NdJ("click",function(){return i.Process()}),a._uU(80,"PROCESAR"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(81,"ion-footer",18),a.TgZ(82,"div",19),a._UZ(83,"ion-img",20),a.qZA(),a.qZA()),2&t&&(a.Q6J("translucent",!0),a.xp6(5),a.Q6J("fullscreen",!0),a.xp6(15),a.hij(" ",i.datosForm.oportunidad,""),a.xp6(4),a.hij(" ",i.datosForm.oferta,""),a.xp6(4),a.hij(" ",i.datosForm.idCliente,""),a.xp6(4),a.hij(" ",i.datosForm.nombreCliente,""),a.xp6(4),a.hij(" ",i.datosForm.direccion,""),a.xp6(4),a.hij(" ",i.datosForm.contacto," "),a.xp6(4),a.hij(" ",i.datosForm.condicionPago,""),a.xp6(4),a.hij(" ",i.datosForm.moneda,""),a.xp6(4),a.hij(" ",i.datosForm.porcentajeDescuento,"%"),a.xp6(4),a.hij(" ",i.datosForm.correoCliente,""),a.xp6(4),a.hij(" ",i.datosForm.observacion,""),a.xp6(11),a.Q6J("ngForOf",i.modelosStorage),a.xp6(1),a.Q6J("ngIf",i.direccionArchivo.length>0),a.xp6(5),a.Q6J("ngIf",i.direccionArchivo.length>0),a.xp6(1),a.Q6J("ngIf",0==i.direccionArchivo.length))},directives:[r.Gu,r.sr,r.Xz,r.Sm,r.fG,r.W2,r.YG,r.PM,r.FN,e.sg,e.O5,r.fr,r.gu],styles:["ion-content[_ngcontent-%COMP%]{--background:url(/assets/img/login/background.png) no-repeat center center/cover}.roundedInput[_ngcontent-%COMP%]{--border-color:var(--ion-color-medium-shade);--background:#e6e7e7;margin-top:5px;padding:0 15px;font-size:14px;--border-radius:15px;--border-width:1px;--box-shadow:5px #fff;--color:#000;--highlight-height:0}.roundedInput.ion-invalid.item-has-focus[_ngcontent-%COMP%]{--border-color:var(--ion-color-danger-shade)}.roundedInput.ion-valid.item-has-focus[_ngcontent-%COMP%]{--border-color:var(--ion-color-success-shade)}.roundedInput.ion-invalid.ion-dirty[_ngcontent-%COMP%]{--border-color:var(--ion-color-danger-shade)}.roundedInput.ion-valid.ion-dirty[_ngcontent-%COMP%]{--border-color:var(--ion-color-success-shade)}table[_ngcontent-%COMP%]{font-family:arial,sans-serif;border:1px solid #4c7176;border-collapse:collapse;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left;padding:8px}th[_ngcontent-%COMP%]{border:1px solid #4c7176;color:#4c7176;background-color:#ddd}td[_ngcontent-%COMP%]{border-left:1px solid #4c7176;border-bottom:1px dashed #4c7176}ion-icon[_ngcontent-%COMP%]{font-size:45px}"]}),t})()}];let v=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[d.Bz.forChild(m)],d.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[e.ez,n.u5,n.UX,r.Pc,v]]}),t})()}}]);